$(document).ready(function() {
	// Submit Record
    $('#frmAddEditRole').submit(function(e) {
        $.ajaxSetup({
            headers: {
                'X-CSRF-TOKEN': jQuery('meta[name="csrf-token"]').attr('content')
            }
        });
        openLoader();
        e.preventDefault();
        let title = $('#title').val(),
        permissions = $('#permissions').val(),
        status = $('#status').val();
        let addEditType = $('#addEditType').val(); // 1 = create, 2 = edit

        if(addEditType == 2){
        	var formData = {
	            title: title,
	            permissions: permissions,
	            status: status,
	            "_method": 'PUT'
	        };
        } else {
        	var formData = {
	            title: title,
	            permissions: permissions,
	            status: status
	        };
        }

        var type = "POST";
        var ajaxurl = $('#frmAddEditRole').attr('action');
        $.ajax({
            type: type,
            url: ajaxurl,
            data: formData,
            dataType: 'json',
            success: function(data) {
                let res = data.response;
                if(res.status_code == 2004 || res.status_code == 2006){
                    Swal.fire({
                        title: 'success',
                        text: res.message,
                        icon: 'success',
                        customClass: {
                          confirmButton: 'btn btn-primary'
                        },
                        buttonsStyling: false
                    });
                    setTimeout(function(){
                           window.location = res.data.url;
                         },2000);
                    // dt_basic.ajax.reload( null, false );
                } else {
                    Swal.fire({
                        title: 'Error!',
                        text: ' Something went wrong!',
                        icon: 'error',
                        customClass: {
                          confirmButton: 'btn btn-primary'
                        },
                        buttonsStyling: false
                    });
                }
                closeLoader();
            },
            error: function(data) {
                Swal.fire({
                    title: 'Error!',
                    text: ' Something went wrong!',
                    icon: 'error',
                    customClass: {
                      confirmButton: 'btn btn-primary'
                    },
                    buttonsStyling: false
                });
                closeLoader();
            }
        });
    });

	$('.select2').select2({
		dropdownAutoWidth: false
	});

	$('.select-all').on('click',function(){
	  $('.select2').find('option').prop('selected', 'selected').end().select2();
	})

	$('.deselect-all').on('click',function(){
	  $('.select2').find('option').prop('selected', false).end().select2();
	})
})